<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Lista 1 - Problema 2</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="problema2.js"></script>
    </head>
    <body>
      <div id="info">
        <button onClick="refreshPage()">Refresh Page!</button>
        <h3></h3>
      </div>
      <!--<script type="text/javascript" src="problema2.js">-->

      <script type="text/javascript">
        var datasetLength = getRandom(1, 50);
        var dataset = [];

        var margin = {top: 50, right: 50, bottom:50, left: 50};

        var width = 500- margin.left - margin.right;
        var height = 500 - margin.top - margin.bottom;

        var xScale = d3.scaleLinear().domain([0,100]).range([0,width]);
        var yScale = d3.scaleLinear().domain([0,100]).range([height, 0]);

        var cScale = d3.scaleLinear().domain([0,100]).range(["gray", "blue"]);

        var mySVG = d3.select("body").append("svg")
              .attr("width", width + margin.left + margin.right) 
              .attr("height", height + margin.top + margin.bottom) 
              .append("g")
              .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        var xAxis = d3.axisBottom(xScale);
        var yAxis = d3.axisLeft(yScale);

        var mySVGAxisGroupX = mySVG.append("g")
                      .attr("transform", "translate(" + 0 + "," + height + ")");
        var mySVGAxisGroupY = mySVG.append("g");

        function getRandom(min,max)
        {
          return Math.floor(Math.random()*(max - min + 1)) + min;
        }

        for(i = 0; i < datasetLength; i++){
          var x = getRandom(1, 100);
          var y = getRandom(1, 100);
          var z = getRandom(5, 10);//raio
          var w = getRandom(1, 100);//cor
         
          dataset = dataset.concat([[x ,y, z, w]]);
        }

        d3
          .select("h3")
          .html('Data lenght > ' + datasetLength);

        mySVG
        .selectAll("circle")
        .data(dataset)
        .enter()
        .append("circle")
        .attr("r",function(d){return xScale(d[2]/5)})
        .attr("cx",function(d){return xScale(d[0]);})   
        .attr("cy",function(d){return yScale(d[1]);})
        .attr("fill", function(d){return cScale(d[3])});  

        mySVGAxisGroupX.call(xAxis);
        mySVGAxisGroupY.call(yAxis);
      </script>
    </body>
</html>